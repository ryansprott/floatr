<div class="card">
  <div class="card-header">
    <h4 class="card-title">
      <%= @sources.length %> MMSIs seen
    </h4>
    <%= link_to(
      "Live map",
      live_maps_path,
      target: "_blank",
      class: "btn btn-danger",
    ) %>
  </div>
  <div class="card-body">
    <div class="form-group">
      <input type="text"
        id="search-input"
        class="form-control"
        placeholder="Search..." />
    </div>
    <div class="table-responsive">
      <table class="table table-striped table-bordered" id="searchable-table">
        <thead>
          <tr>
            <th style="width: 10%">
              MMSI
            </th>
            <th style="width: 50%">
              Source
            </th>
            <th style="width: 5%">
              Flag
            </th>
            <th style="width: 10%">
              First seen
            </th>
            <th style="width: 10%">
              Last seen
            </th>
            <th style="width: 10%">
              Messages
            </th>
          </tr>
        </thead>
        <tbody>
          <% @sources.each do |source| %>
            <tr>
              <td>
                <%= link_to(
                  source.mmsi.to_s,
                  source_path(source),
                  class: "btn btn-primary",
                ) %>
              </td>
              <td>
                <%= source.display_name %>
              </td>
              <td data-sort="<%= source.country_code %>">
                <%= source.country_flag %>
              </td>
              <td data-sort="<%= source.created_at.strftime("%y%m%d%H%M") %>">
                <%= time_ago_in_words(source.created_at) %>
              </td>
              <td data-sort="<%= source.updated_at.strftime("%y%m%d%H%M") %>">
                <%= time_ago_in_words(source.updated_at) %>
              </td>
              <td data-sort="<%= source.messages_count %>">
                <%= source.messages_count %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
