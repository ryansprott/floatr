<div>
  <h1>
    <%= link_to(
      @source.mmsi,
      "https://www.marinetraffic.com/en/ais/details/ships/mmsi:#{@source.mmsi}",
      target: "_blank",
      title: "Show on MarineTraffic",
    ) %>
  </h1>
</div>

<div>
  <h2>
    <%= @source.ship_name %>
  </h2>
</div>

<div>
  <h3>
    <%= @source.callsign %>
  </h3>
</div>

<div>
  <h4>
    <%= @source.messages.pluck(:category_description).uniq.join(",") %>
  </h4>
</div>

<hr />

<h2>
  Messages
</h2>

<table border>
  <tr>
    <th>Type</th>
    <th>Received</th>
  </tr>
  <% @source.messages.group(:type).count.each do |key, value| %>
  <tr>
    <td>
      <%= key %>
    </td>
    <td>
      <%= value %>
    </td>
  </tr>
  <% end %>
</table>

<%= link_to("Show map", source_heatmaps_path(@source)) %>
